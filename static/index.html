<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Bithole Public APIs</title>
        <meta property="og:title" content="Bithole Public APIs">
        <style>
            body {
                max-width: 40em;
                margin: auto;
                padding: 1.0em;
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
                font-size: 12pt;
            }

            code {
                font-size: 11pt;
                background: #f0f0f0;
                padding: 0.1em 0.2em;
                border-radius: 5px;
            }

            .endpoint {
                font-family: monospace;
                font-weight: normal;
            }

            h1 {
                padding-bottom: 0.2em;
                border-bottom: 1px solid #cccccc;
            }

            h1, b {
                font-weight: 600;
            }

            table, td, th {
                border-collapse: collapse;
            }

            table {
                margin: 1.0em 0;
            }

            td, th {
                padding: 0.5em;
                border: 1px solid #aaa;
            }
        </style>
    </head>
    <body>
    
        <h1>Bithole Public APIs</h1>
        <p>This is a small collection of APIs that I find handy. They are publicly available at <a href="https://apis.bithole.dev">apis.bithole.dev</a>, and the code powering the backend is hosted on <a href="https://github.com/adrian154/apis/">GitHub</a>.</p>
    
        <h1 class="endpoint">/ip</h1>
        <p><b>Methods</b>: GET</p>
        <p><b>Parameters</b>: None</p>
        <p><b>Response</b>: The IPv4 address which the request was received from.</p>
        
        <h1 class="endpoint">/headers</h1>
        <p><b>Methods</b>: GET</p>
        <p><b>Parameters</b>:</p>
        <ul>
            <li><code>h</code>: (string, optional) The name of an HTTP header</li>
        </ul>
        <p>
            <b>Response</b>: If <code>h</code> is provided, the value of header <code>h</code> on the request is returned.
            Otherwise, a JSON object mapping the header names and values on the request is returned.
        </p>

        <h1 class="endpoint">/embed</h1>
        <p><b>Methods</b>: GET</p>
        <p><b>Parameters</b>:</p>
        <ul>
            <li><code>title</code>: (string, optional) embed title, equivalent to <code>og:title</code></li>
            <li><code>desc</code>: (string, optional) embed description, equivalent to <code>og:description</code></li>
            <li><code>image</code>: (string, optional) embed thumbnail URL, equivalent to <code>og:image</code></li>
        </ul>
        <p><b>Response</b>: An HTML document with OpenGraph tags containing the parameters specified.</p>

        <h1 class="endpoint">/mc/ping-server</h1>
        <p><b>Methods</b>: GET</p>
        <p><b>Parameters</b>:</p>
        <ul>
            <li><code>host</code>: (string) server hostname</li>
            <li><code>port</code>: (number) server port</li>
        </ul>
        <p>
            <b>Response</b>: If the server is responding to pings, the <a href="https://wiki.vg/Server_List_Ping#Response">JSON response</a> generated by the server is returned.
            In addition, if the server has a custom favicon, an additional field called <code>faviconURL</code> will be included, linking to an endpoint that serves the favicon as an image.
            The value of this field is suitable for embedding, e.g. in HTML documents. However, favicons are not persisted between reboots of the API server, and may be evicted from the cache at any time.
            If the server does not respond, a JSON object with a human-readable error message in a field called <code>error</code> will be returned.
        </p>
        <p>This method caches responses from servers for 60 seconds, but negative responses are not cached.</p>

        <h1 class="endpoint">/cors-proxy</h1>
        <p><b>Methods</b>: GET POST PUT DELETE PATCH</p>
        <p><b>Parameters</b>:</p>
        <ul>
            <li><code>url</code>: (string) target URL for the request</li>
            <li>Additional parameters in the request to this endpoint are interpreted as headers to be set on the proxied request, allowing arbitrary headers to be set.</li>
        </ul>
        <p><b>Response</b>: If the target URL is invalid, a 400 status code is returned. If the request could not be made, a 500 status code is returned. Otherwise, the status code and data sent by the server located at the target URL is returned.</p>
        <p>By default, the <code>Access-Control-Allow-Origin</code> header is set to <code>*</code> to enable bypassing CORS restrictions.</p>

        <h1 class="endpoint">/dns-query</h1>
        <p><b>Methods</b>: GET</p>
        <p><b>Parameters</b>:</p>
        <ul>
            <li><code>hostname</code>: (string) The hostname to be resolved</li>
            <li><code>nameserver</code>: (string) The nameserver to query</li>
            <li><code>type</code>: (number) The numerical record type, as defined by the relevant RFCs.</li>
            <li><code>recursive</code>: (optional, boolean) Whether to ask the nameserver to query recursively.</li>
        </ul>
        <p>
            <b>Response</b>: The deserialized JSON response, with the following fields:
            <ul>
                <li><code>id</code>: the ID of the DNS transaction</li>
                <li><code>latency</code>: the number of milliseconds between sending the request and receiving the response</li>
                <li><code>flags</code>:
                    <ul>
                        <li><code>recursionAvailable</code>: Whether the nameserver is capable of answering recursive queries</li>
                        <li><code>recursiveQuery</code>: Whether a recursive query was requested; this value is copied from the original request</li>
                        <li><code>truncated</code>: Whether the message was truncated; this should <i>never</i> be set because this endpoint automatically retries truncated requests over TCP.</li>
                        <li><code>authoritative</code>: Whether the nameserver is authoritative for the requested domains.</li>
                        <li><code>isResponse</code>: Whether the message is a response to a query. This should always be set.</li>
                    </ul>
                </li>
                <li><code>responseCode</code>: The status of the response. Generally one of the following values:
                    <table>
                        <tr>
                            <th>Value</th>
                            <th>Meaning</th>
                        </tr>
                        <tr><td>0</td><td>OK</td></tr>
                        <tr><td>1</td><td>Bad query</td></tr>
                        <tr><td>2</td><td>Server error</td></tr>
                        <tr><td>3</td><td>Name error</td></tr>
                        <tr><td>4</td><td>Unsupported</td></tr>
                        <tr><td>5</td><td>Refused</td></tr>
                    </table>
                </li>
                <li><code>opcode</code>: The operation requested; always 1, a standard query.</li>
                <li><code>questions</code>: An array of questions sent in the original query. The value of this array should be ignored.</li>
                <li><code>answerRecords</code>, <code>authorityRecords</code>, <code>additionalRecords</code>: Arrays of resource records sent in response to the query. Each resource record is an object with the following fields:
                    <ul>
                        <li><code>domain</code>: the name which the resource record is associated with</li>
                        <li><code>type</code>: the resource record's type</li>
                        <li><code>class</code>: the resource record's class; should be 1 for Internet</li>
                        <li><code>ttl</code>: how long the resource record can be cached, in seconds</li>
                        <li><code>rdata</code>: The value of the resource record. This API only understands how to decode RDATA for a limited set of resource records:
                            <ul>
                                <li><b>A, AAAA</b>: <code>rdata</code> is the IP address.</li>
                                <li><b>CNAME, NS, PTR</b>: <code>rdata</code> is the domain name.</li>
                                <li><b>SOA</b>: <code>rdata</code> is an object with fields <code>mname</code>, <code>rname</code>, <code>serial</code>, <code>refresh</code>, <code>retry</code>, <code>expire</code>, and <code>minimum</code>. See RFC 1035 for info on how to interpret each field.</li>
                                <li><b>MX</b>: <code>rdata</code> is an object with fields <code>preference</code> and <code>exchange</code>.</li>
                                <li><b>TXT</b>: <code>rdata</code> is the value of the TXT record. If multiple strings are present, they will be concatenated.</li>
                                <li><b>CAA</b>: <code>rdata</code> is an object with fields <code>flags</code>, <code>tag</code>, and <code>value</code>.</li>
                                <li><b>SRV</b>: <code>rdata</code> is an object with fields <code>priority</code>, <code>weight</code>, <code>port</code>, and <code>target</code>.</li>
                            </ul>
                            Unsupported resource records will be returned as a Buffer as encoded with <a href="https://nodejs.org/api/buffer.html#buftojson">Buffer#toJSON</a>.
                        </li>
                    </ul>
                </li>
            </ul>
        </p>
        <p>The values in the response are not guaranteed to be sane or correct. This API merely makes a best-effort attempt to correctly deserialize the response sent by the server. Truncated responses will automatically be retried over TCP. If the request could not be completed, a 400 status code is returned. The response value will be a JSON object with a field named <code>error</code> containing a human-readable error.</p>

        <h1 class="endpoint">/dns-query-addrs</h1>
        <p><b>Methods</b>: GET</p>
        <p><b>Parameters</b>: </p>
        <ul>
            <li><code>name</code>: a <b>fully qualified</b> domain name</li>
        </ul>
        <p>
            <b>Response</b>: a JSON list of IP addresses that have recently queried the DNS server for that name.
            The built-in DNS server answers all A queries with the IP address of `bithole.dev`.
            Requester IP addresses are purged from the cache periodically.
        </p>

        <!--
        <h1 class="endpoint"></h1>
        <p><b>Methods</b>: </p>
        <p><b>Parameters</b>: </p>
        <p><b>Response</b>: </p>
        -->

        <h1>Terms of Use</h1>
        <p>I reserve the right to stop providing this service at any time. I cannot guarantee that data retrieved through this API will be accurate. No warranty is provided with this service. By using this service you agree that I shall not be held responsible for any damages or liabilities related to use of this service.</p>
    
    </body>
</html>